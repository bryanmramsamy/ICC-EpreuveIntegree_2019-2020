{% extends 'base.html' %}
{% load i18n registration_extra static %}

{% block title %}{{ module.title }} | {{ module.reference }}{% endblock title %}

{% block content %}

  {# Heading jumbotron #}

  {% include 'management/module/module_detailview_jumbotron.html' %}


  {# Presentation card #}

  {% with module_actions_enabled=True show_description=False %}
    {% include 'management/module/card.html' %}
  {% endwith %}

  <br>


  {# Module's courses list #}

  <table class="table table-stripped table-hover table-sm">
    <thead>
      <tr>
        <th scope="col">{% trans 'Course' %}</th>
        <th scope="col">{% trans 'Teacher' %}</th>
        <th scope="col">{% trans 'Start date' %}</th>
        <th scope="col">{% trans 'End date' %}</th>
        <th scope="col">{% trans 'Classroom' %}</th>
        <th scope="col">{% trans 'Free seats left' %}</th>
      </tr>
    </thead>
    <tbody>

      {% for course in module.courses.all %}
        {% if course.status != 'FINISHED' %}
          <tr>
            <th scope="row">{{ course.reference }}</th>
            <td>{{ course.teacher.get_full_name }}</td>
            <td>{{ course.date_start }}</td>
            <td>{{ course.date_end }}</td>
            {% if course.room is not None %}
              <td>{{ course.room.name }}</td>
              <td class="text-center">
                <strong class="text-{% if course.over_attendance %}warning{% elif course.max_seats_available == 0 %}danger{% else %}success{% endif %}">
                  {{ course.max_seats_available }}
                </strong>
              </td>
            {% endif %}
          </tr>
        {% endif %}
      {% endfor %}
    </tbody>
  </table>

  <br>


  {# Back to ListView button #}

  <div class="text-right">
    <a href="{% url 'module_listview' %}" class="btn btn-block btn-outline-dark">
      <h3>
        {% include 'logo/module.html' %} {% trans 'Back to the modules catalog' %} {% include 'logo/back.html' %}
      </h3>
    </a>
  </div>

  <br>

{% endblock content %}
