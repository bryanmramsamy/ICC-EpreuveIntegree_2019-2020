{% extends 'base.html' %}
{% load i18n registration_extra static %}


{% block title %}{{ module.title }} | {{ module.reference }}{% endblock title %}


{% block content %}
  {# Heading jumbotron #}

  {% include 'management/module/module_detailview_jumbotron.html' %}


  {# Back to ListView button #}

  {% include 'management/module/module_back_to_catalog_button.html' %}

  <br>


  {# Presentation card #}

  {% with module_actions_enabled=True show_description=False %}
    {% include 'management/module/module_card.html' %}
  {% endwith %}

  <br>


  {# Module's courses list #}

  <section class="container p-1 p-md-3 border bg-light">
    <h3 class="h3 text-center">{% trans 'Upcoming and ongoing courses for this module' %}</h3>
    <table class="table table-stripped table-hover table-sm">
      <thead>
        <tr>
          <th scope="col">{% trans 'Course' %}</th>
          <th scope="col">{% trans 'Teacher' %}</th>
          <th scope="col">{% trans 'Start date' %}</th>
          <th scope="col">{% trans 'End date' %}</th>
          <th scope="col">{% trans 'Classroom' %}</th>
          <th scope="col">{% trans 'Free seats left' %}</th>
        </tr>
      </thead>
      <tbody>

        {% for course in module.courses.all %}
          {% if course.status != 'FINISHED' %}
            <tr>
              <td>{{ course.reference }}</td>
              <td>{{ course.teacher.get_full_name }}</td>
              <td>{{ course.date_start }}</td>
              <td>{{ course.date_end }}</td>
              {% if course.room is not None %}
                <td>{{ course.room.name }}</td>
                <td class="text-center">
                  <strong class="text-{% if course.over_attendance %}warning{% elif course.max_seats_available == 0 %}danger{% else %}success{% endif %}">
                    {{ course.max_seats_available }}
                  </strong>
                </td>
              {% else %}
                <td colspan="2" class="text-danger">{% include 'logo/check_warning.html' %} {% trans 'No classroom available yet' %}</td>
              {% endif %}
            </tr>
          {% endif %}
        {% empty %}
          <tr>
            <td colspan="6" class="h5 text-center text-danger">
              {% include 'logo/check_warning.html' %} {% trans 'No course available for this module' %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>

  <br>


  {# Back to ListView button #}

  {% include 'management/module/module_back_to_catalog_button.html' %}

{% endblock content %}
